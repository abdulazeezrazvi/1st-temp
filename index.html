<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>AR Business Card</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

    <!-- MindAR -->
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

    <style>
      body {
        margin: 0;
        overflow: hidden;
        background: black;
      }
    </style>
  </head>

  <body>
    <a-scene
      mindar-image="
    imageTargetSrc: targets.mind;
    filterMinCF: 0.00001;
    filterBeta: 0.0001;
    missTolerance: 8;
    warmupTolerance: 8;
  "
      vr-mode-ui="enabled:false"
      device-orientation-permission-ui="enabled:true"
      embedded
      renderer="precision: mediump; logarithmicDepthBuffer: true;"
    >
      <!-- SINGLE CAMERA (FIXED) -->
      <a-camera
        position="0 0 0"
        look-controls="enabled:false"
        cursor="rayOrigin: mouse"
        raycaster="objects: .clickable"
      >
      </a-camera>

      <!-- IMAGE TARGET -->
      <a-entity mindar-image-target="targetIndex: 0" id="target">
        <!-- CARD -->
        <a-plane
          src="1.png"
          width="1"
          height="0.57"
          position="0 0 0"
          material="transparent:true"
        >
        </a-plane>

        <!-- PROFILE PANEL -->
        <a-plane
          id="panel"
          width="0.6"
          height="0.45"
          position="1.2 0 0.02"
          color="#0f172a"
          visible="false"
        >
          <a-text
            value="Abdul Azeez Razvi"
            position="0 0.15 0.01"
            align="center"
            color="#38bdf8"
            width="1.2"
          ></a-text>

          <a-text
            value="Raza Online Services"
            position="0 0.05 0.01"
            align="center"
            color="#ffffff"
            width="1"
          ></a-text>

          <a-text
            value="Davanagere"
            position="0 -0.05 0.01"
            align="center"
            color="#94a3b8"
            width="1"
          ></a-text>
        </a-plane>

        <!-- BUTTONS -->
        <a-plane
          id="btn-map"
          class="clickable"
          position="-0.30 -0.45 0.05"
          width="0.16"
          height="0.16"
          color="#22c55e"
          visible="false"
        ></a-plane>

        <a-plane
          id="btn-call"
          class="clickable"
          position="-0.10 -0.45 0.05"
          width="0.16"
          height="0.16"
          color="#0ea5e9"
          visible="false"
        ></a-plane>

        <a-plane
          id="btn-whatsapp"
          class="clickable"
          position="0.10 -0.45 0.05"
          width="0.16"
          height="0.16"
          color="#25D366"
          visible="false"
        ></a-plane>

        <a-plane
          id="btn-instagram"
          class="clickable"
          position="0.30 -0.45 0.05"
          width="0.16"
          height="0.16"
          color="#e11d48"
          visible="false"
        ></a-plane>
      </a-entity>
    </a-scene>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const target = document.querySelector("#target");
        const panel = document.querySelector("#panel");

        const btnMap = document.querySelector("#btn-map");
        const btnCall = document.querySelector("#btn-call");
        const btnWhatsapp = document.querySelector("#btn-whatsapp");
        const btnInstagram = document.querySelector("#btn-instagram");

        const buttons = [btnMap, btnCall, btnWhatsapp, btnInstagram];

        let isVisible = false;

        /* ---------- SHOW ANIMATION ---------- */
        function playAnimation() {
          panel.setAttribute("visible", true);
          buttons.forEach((btn) => btn.setAttribute("visible", true));

          panel.setAttribute("position", "1.2 0 0.02");

          panel.setAttribute("animation", {
            property: "position",
            to: "0.85 0 0.02",
            dur: 700,
            easing: "easeOutCubic",
          });

          buttons.forEach((btn, index) => {
            btn.setAttribute("scale", "0 0 0");

            setTimeout(
              () => {
                btn.setAttribute("animation", {
                  property: "scale",
                  to: "1 1 1",
                  dur: 300,
                  easing: "easeOutBack",
                });
              },
              300 + index * 150,
            );
          });
        }

        /* ---------- TARGET EVENTS ---------- */
        target.addEventListener("targetFound", () => {
          if (!isVisible) {
            isVisible = true;
            playAnimation();
          }
        });

        target.addEventListener("targetLost", () => {
          isVisible = false;

          panel.setAttribute("visible", false);
          buttons.forEach((btn) => btn.setAttribute("visible", false));
        });

        /* ---------- CLICK ACTIONS ---------- */
        btnMap.addEventListener("click", () => {
          window.open("https://maps.google.com/?q=Davanagere", "_blank");
        });

        btnCall.addEventListener("click", () => {
          window.location.href = "tel:9741366349";
        });

        btnWhatsapp.addEventListener("click", () => {
          window.open("https://wa.me/919741366349", "_blank");
        });

        btnInstagram.addEventListener("click", () => {
          window.open("https://instagram.com/YOUR_USERNAME", "_blank");
        });
      });
    </script>
  </body>
</html>
